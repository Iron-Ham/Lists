{"parentUuid":null,"isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","type":"progress","data":{"type":"hook_progress","hookEvent":"SessionStart","hookName":"SessionStart:startup","command":"entire hooks claude-code session-start"},"parentToolUseID":"88ede8ec-c898-4076-93ed-ef683c63ea05","toolUseID":"88ede8ec-c898-4076-93ed-ef683c63ea05","timestamp":"2026-02-24T14:59:10.473Z","uuid":"ebe7c072-8398-4706-bb6c-8fbbe15810e4"}
{"parentUuid":"ebe7c072-8398-4706-bb6c-8fbbe15810e4","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","type":"progress","data":{"type":"hook_progress","hookEvent":"SessionStart","hookName":"SessionStart:startup","command":"${CLAUDE_PLUGIN_ROOT}/hooks-handlers/session-start.sh"},"parentToolUseID":"88ede8ec-c898-4076-93ed-ef683c63ea05","toolUseID":"88ede8ec-c898-4076-93ed-ef683c63ea05","timestamp":"2026-02-24T14:59:10.526Z","uuid":"71ee3909-0118-4289-a310-109af0e84de2"}
{"type":"file-history-snapshot","messageId":"393c119d-7a62-4589-8cb3-86de518192cd","snapshot":{"messageId":"393c119d-7a62-4589-8cb3-86de518192cd","trackedFileBackups":{},"timestamp":"2026-02-24T14:59:18.482Z"},"isSnapshotUpdate":false}
{"parentUuid":"71ee3909-0118-4289-a310-109af0e84de2","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","type":"user","message":{"role":"user","content":"Cut a patch release"},"uuid":"393c119d-7a62-4589-8cb3-86de518192cd","timestamp":"2026-02-24T14:59:12.892Z","todos":[],"permissionMode":"bypassPermissions"}
{"parentUuid":"393c119d-7a62-4589-8cb3-86de518192cd","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","message":{"model":"claude-opus-4-6","id":"msg_01U9kE9sXcMSqcX2S6uu68EC","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"The user wants to cut a patch release for ListKit. Let me understand what's needed:\n\n1. First, I need to check the current version and changelog to understand what's in the unreleased section\n2. Determine the next patch version\n3. Update the changelog with the new version\n4. Possibly update any version references\n5. Create a branch, commit, and PR\n\nLet me start by reading the changelog and any version files.","signature":"Er8ECkYICxgCKkC32+AzXrjIbY73URRR1mOxgZ1jIBGpdwpswwyL+J8zdZCon17/0srXQXhV8Y9Ty5bnDfEAnScj+U/3Tr2cJbhqEgxLqHrN0SbQ++dy2SoaDOvURzLuws9pNz+WwyIwReAJKGoRMoSiI1MkTwhJ35B4cvdkF8zcxbYFrP3p0x4uZ859MyT2kZycXTqusIdZKqYDcOV5YHij0ujj3Bh3+TQaKU1Vqv6wpyPHrGzzKSNmY0C4Il381msILBgkIeR5i0I9LDHNH7iIs8143iQGmJWP1RELx32G1h9XrzZf1vUsecgoUFnAaugPuK/i2p1RrVadByEKkBVt5gA8wQvvwz1JXiiINnMcye9pgMOYJtFMk5XMY//6x9aApwkfIphnTvIopdyp+5ImxMx+n5iQ65jlwBrrCs9l2NJ+YTCiijuZ/oZQrQ7s9QXetTVCBb8oki6mjWbJXx0UN/y5lW15VTXVVTDfAM4UclH5Q5h92IYuYjO6ebkMiHOWhkEjBN28c4KJFJQ3legThf1a58RM6C9frGabr3t31TTeSX89bb2fa8hMvqgkifPzocbFQCFNHaIPBPdU5iCNhi+VC/FlwkulYaAKqWve+U0V27Tg8MUOHNTd2zPq8IVMSg3oN5YcDcC4r0BHtVq6CdDn9/3PswlzQbHFqYcq/L+cRCk/kGPOHjYYoNZvxRmv+o95vR3/tpY5qFr/GgTiEBa7/LHizlJDDotxCpzNOtP2L+Bs88hHX5aV8MDZ1WIYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":7840,"cache_read_input_tokens":9575,"cache_creation":{"ephemeral_5m_input_tokens":7840,"ephemeral_1h_input_tokens":0},"output_tokens":11,"service_tier":"standard","inference_geo":"global"}},"requestId":"req_011CYT6K84uwb7anzeok6bmi","type":"assistant","uuid":"0fc789c6-efde-4e39-917e-5f24fcd6b337","timestamp":"2026-02-24T14:59:23.544Z"}
{"parentUuid":"0fc789c6-efde-4e39-917e-5f24fcd6b337","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","message":{"model":"claude-opus-4-6","id":"msg_01U9kE9sXcMSqcX2S6uu68EC","type":"message","role":"assistant","content":[{"type":"text","text":"Let me gather the current state of the project to understand what version we're on and what's unreleased."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":7840,"cache_read_input_tokens":9575,"cache_creation":{"ephemeral_5m_input_tokens":7840,"ephemeral_1h_input_tokens":0},"output_tokens":11,"service_tier":"standard","inference_geo":"global"}},"requestId":"req_011CYT6K84uwb7anzeok6bmi","type":"assistant","uuid":"7fa35344-5003-43d2-90ce-55c5759846e7","timestamp":"2026-02-24T14:59:24.219Z"}
{"parentUuid":"7fa35344-5003-43d2-90ce-55c5759846e7","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","slug":"sequential-brewing-ember","message":{"model":"claude-opus-4-6","id":"msg_01U9kE9sXcMSqcX2S6uu68EC","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_011kwNMRZ2T5vycsjkbouyKQ","name":"Read","input":{"file_path":"/Users/zer0/Developer/oss/ListKit/CHANGELOG.md"},"caller":{"type":"direct"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":7840,"cache_read_input_tokens":9575,"cache_creation":{"ephemeral_5m_input_tokens":7840,"ephemeral_1h_input_tokens":0},"output_tokens":11,"service_tier":"standard","inference_geo":"global"}},"requestId":"req_011CYT6K84uwb7anzeok6bmi","type":"assistant","uuid":"d0bfe09c-9125-428a-9f52-63245099065f","timestamp":"2026-02-24T14:59:24.765Z"}
{"parentUuid":"d0bfe09c-9125-428a-9f52-63245099065f","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","slug":"sequential-brewing-ember","type":"progress","data":{"type":"hook_progress","hookEvent":"PostToolUse","hookName":"PostToolUse:Read","command":"callback"},"parentToolUseID":"toolu_011kwNMRZ2T5vycsjkbouyKQ","toolUseID":"toolu_011kwNMRZ2T5vycsjkbouyKQ","timestamp":"2026-02-24T14:59:24.793Z","uuid":"3f90cea8-9b28-40ac-8451-33f92d965601"}
{"parentUuid":"d0bfe09c-9125-428a-9f52-63245099065f","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","slug":"sequential-brewing-ember","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_011kwNMRZ2T5vycsjkbouyKQ","type":"tool_result","content":"     1→# Changelog\n     2→\n     3→All notable changes to this project will be documented in this file.\n     4→\n     5→The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),\n     6→and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n     7→\n     8→## [Unreleased]\n     9→\n    10→### Added\n    11→\n    12→- Added `ListConfigurable` protocol that provides shared convenience APIs (`backgroundView`, `allowsMultipleSelection`, `isEditing`, `numberOfItems`, `selectedItems`, `selectItem`, `deselectItem`, `deselectAll`, `scrollToTop`, `scrollToBottom`, `scrollToItem`, and more) via protocol extension — adding a new convenience method to this protocol automatically provides it to `SimpleList`, `GroupedList`, and `OutlineList`\n    13→\n    14→### Changed\n    15→\n    16→- Extracted shared `computeItemsToReconfigure` function from `ListDataSource` and `MixedListDataSource`, deduplicating the autoReconfigure algorithm\n    17→- Extracted shared `flattenSectionSnapshot` function from `ListDataSource` and `MixedListDataSource`, deduplicating the section snapshot flattening logic\n    18→- Removed dead convenience methods from `ListConfigurationBridge` (`scrollToItem`, `selectItem`, `deselectItem`, `isSelected`, `scrollToTop`, `scrollToBottom`) — now provided by `ListConfigurable` protocol extension\n    19→\n    20→### Fixed\n    21→\n    22→- Fixed `MixedListDataSource.apply(_:to:animatingDifferences:)` bypassing `autoReconfigure`, so `ContentEquatable` items now correctly trigger reconfiguration when applied via section snapshots\n    23→- Fixed `OutlineList.setItems` not reconfiguring cells when `CellViewModel` conforms to `ContentEquatable` and content changes but identity stays the same ([#65](https://github.com/Iron-Ham/Lists/issues/65))\n    24→- Fixed context menus not appearing on Mac Catalyst by adopting the iOS 16+ plural `contextMenuConfigurationForItemsAt` delegate method ([#67](https://github.com/Iron-Ham/Lists/issues/67))\n    25→\n    26→## [0.6.5] - 2026-02-20\n    27→\n    28→### Fixed\n    29→\n    30→- Fixed Mac Catalyst refresh control guard to use process-level `UIDevice.current.userInterfaceIdiom` instead of `UIView.behavioralStyle`, which does not resolve correctly before the view is in a window hierarchy\n    31→\n    32→## [0.6.4] - 2026-02-20\n    33→\n    34→### Fixed\n    35→\n    36→- Fixed crash when `onRefresh` is set on Mac Catalyst in Mac idiom — `UIRefreshControl` is now skipped when `behavioralStyle == .mac`, while apps using iPad idiom on Catalyst continue to get pull-to-refresh\n    37→\n    38→## [0.6.3] - 2026-02-20\n    39→\n    40→### Added\n    41→\n    42→- Comprehensive animated apply test suite (21 tests) covering section insert/delete/move/replace, item reorder and cross-section moves, non-structural reload/reconfigure fast path, structural changes with deferred reload/reconfigure markers, background diff with large datasets (≥1,000 items), and rapid-fire serialization edge cases\n    43→- Deterministic cancellation tests verifying completion callback invocation and snapshot invariant safety when `applyTask` is cancelled mid-chain\n    44→\n    45→### Fixed\n    46→\n    47→- Completion handler `apply()` variant now supports cooperative cancellation and always invokes the completion callback (even when cancelled), preventing silent hangs for callers using `withCheckedContinuation`\n    48→- `performBatchUpdates` completion handler now checks the `finished` parameter — deferred reloads/reconfigures are skipped when UIKit interrupts the batch update\n    49→\n    50→## [0.6.2] - 2026-02-19\n    51→\n    52→### Fixed\n    53→\n    54→- Fixed `NSInternalInconsistencyException` crash when applying snapshots with only inserts (no deletes) using animated differences — `currentSnapshot` is now updated inside the `performBatchUpdates` closure so UIKit sees correct pre/post item counts\n    55→\n    56→### Added\n    57→\n    58→- Animated apply regression tests covering pure inserts, pure deletes, empty↔populated transitions, and mixed cross-section operations\n    59→\n    60→## [0.6.1] - 2026-02-18\n    61→\n    62→### Changed\n    63→\n    64→- `CollectionViewDiffableDataSource.performApply()` now offloads diff computation to a background thread for snapshots with ≥1,000 items, keeping the main thread free during large dataset updates\n    65→\n    66→### Added\n    67→\n    68→- Realistic UUID-based benchmarks comparing ListKit vs Apple using the `Item.ID` pattern with `Identifiable` model types\n    69→- Mixed operations benchmarks testing inserts + deletes + moves simultaneously across ListKit, Apple, and IGListKit\n    70→- Data source `apply()` benchmarks measuring the full end-to-end pipeline (diff + `performBatchUpdates`) for ListKit vs Apple\n    71→\n    72→### Fixed\n    73→\n    74→- `speedup()` benchmark helper now correctly handles durations >= 1 second (previously ignored the `seconds` component)\n    75→\n    76→## [0.6.0] - 2026-02-16\n    77→\n    78→### Added\n    79→\n    80→- **Snapshot `Equatable` conformance**: `DiffableDataSourceSnapshot` now conforms to `Equatable`, comparing section identifiers and item arrays while ignoring transient reload/reconfigure markers.\n    81→- **Snapshot `init(sections:)` convenience initializer**: Build snapshots from `[(SectionID, [ItemID])]` pairs in a single call.\n    82→- **`sectionIdentifier(at:)` on `DiffableDataSourceSnapshot`**: Index-based section lookup, complementing the existing `index(ofSection:)`.\n    83→- **`replaceItems(in:with:)` on `DiffableDataSourceSnapshot`**: Bulk-replace all items in a section without deleting/re-appending the section.\n    84→- **`removeItems(where:)` on `DiffableDataSourceSnapshot`**: Remove items matching a predicate across all sections, following `removeAll(where:)` convention.\n    85→- **`children(of:)` on `DiffableDataSourceSectionSnapshot`**: Returns direct children of a given item, complementing the existing `parent(of:)`.\n    86→- **Programmatic selection**: `selectItem(_:at:animated:)`, `deselectItem(_:animated:)`, and `isSelected(_:)` on `SimpleList`, `GroupedList`, and `OutlineList`.\n    87→- **`shouldSelect` handler**: Closure on all three configurations (+ SwiftUI modifiers) that gates item selection via the `collectionView(_:shouldSelectItemAt:)` delegate.\n    88→- **`backgroundView` property**: Auto-visibility empty-state view on all three configurations (+ SwiftUI modifiers), shown when the list is empty and hidden when it has content.\n    89→- **`canMoveItemProvider`**: Per-item reorder predicate on `SimpleList` and `GroupedList` (+ SwiftUI modifiers).\n    90→- **`scrollToTop` / `scrollToBottom`**: Convenience scroll methods on all three configurations.\n    91→- **OutlineList tree queries**: `allItems`, `visibleItems`, `rootItems`, `parent(of:)`, and `level(of:)` for inspecting the outline hierarchy.\n    92→- **`SimpleList.items`**: Convenience accessor for the current items in the list.\n    93→- **Snapshot type aliases**: `SimpleList.Snapshot`, `GroupedList.Snapshot`, `OutlineList.Snapshot` for ergonomic snapshot type references.\n    94→- **`MixedSection` header/footer support**: Optional `header` and `footer` parameters on `MixedSection`, wired through `MixedListDataSource.apply(content:)` with `headerForSection(_:)`/`footerForSection(_:)` accessors and a `configureListHeaderFooterProvider()` convenience method for automatic supplementary view rendering.\n    95→- **`MixedListDataSource` reorder support**: `canMoveItemHandler` and `didMoveItemHandler` properties for drag-and-drop reordering parity with `ListDataSource`.\n    96→- **Section query methods on `GroupedList`**: `sectionIdentifier(for:)`, `index(for:)`, and `items(in:)` for section-level navigation.\n    97→- **`OutlineList` programmatic expand/collapse**: `expand(_:animated:)`, `collapse(_:animated:)`, and `isExpanded(_:)` methods for controlling outline hierarchy without rebuilding the tree.\n    98→- **`onMove` SwiftUI modifier**: `.onMove()` modifier on `SimpleListView` and `GroupedListView` for drag-and-drop reordering, completing the SwiftUI wrapper API.\n    99→- **Convenience query properties**: `numberOfItems`, `numberOfSections`, `selectedItems`, and `deselectAll(animated:)` on all three configurations (`SimpleList`, `GroupedList`, `OutlineList`).\n   100→- **`SectionModel.mapItems(_:)`**: Transforms items within a section while preserving metadata, matching `OutlineItem.mapItems(_:)` for API consistency.\n   101→- **`SectionModel` `Identifiable` conformance**: Enables direct use in SwiftUI `ForEach` and other `Identifiable`-requiring contexts.\n   102→- **`OutlineItem` `Identifiable` conformance**: Uses `item` as identity, enabling direct use in SwiftUI contexts.\n   103→\n   104→## [0.5.0] - 2026-02-16\n   105→\n   106→### Added\n   107→\n   108→- **UIKit chat examples**: Two new UIKit counterparts to the existing SwiftUI chat example — `ListsChatExampleViewController` (`SimpleList` + `CellViewModel` + `UIHostingConfiguration`) and `ListKitChatExampleViewController` (raw `CollectionViewDiffableDataSource` with pure UIKit cells and manual cell reconfiguration).\n   109→- **Shared chat input bar**: Reusable `ChatInputBar` UIKit view with keyboard layout guide support.\n   110→- **`ListCellViewModel` protocol**: Convenience refinement of `CellViewModel` that defaults `Cell` to `UICollectionViewListCell`, eliminating the most common boilerplate `typealias`.\n   111→- **`UICollectionViewListCell.setListContent()` helpers**: Two convenience methods (parameter-based and closure-based) that replace the repetitive 4-line content configuration pattern with a single call.\n   112→- **SwiftUI-style view modifiers**: Chainable `.onSelect`, `.onDelete`, `.onRefresh`, `.editing`, `.contextMenu`, `.trailingSwipeActions`, `.leadingSwipeActions`, and more on `SimpleListView`, `GroupedListView`, and `OutlineListView`. Replaces the 19+ parameter initializer with an idiomatic init-then-modify pattern.\n   113→- **Pull-to-refresh on UIKit configurations**: `onRefresh` property on `SimpleList`, `GroupedList`, and `OutlineList` with proper async task lifecycle management, bringing parity with the SwiftUI wrappers.\n   114→- **`ContentEquatable` protocol**: Opt-in protocol for detecting content changes in identity-based view models. Automatically marks items for reconfiguration when content differs, solving the stale-UI footgun with `Identifiable` types.\n   115→- **`OutlineItemBuilder` result builder**: Declarative trailing-closure syntax for constructing `OutlineItem` hierarchies with full support for conditionals, loops, and arrays.\n   116→- **`SectionModel` `@ItemsBuilder` initializer**: Declarative builder-based section construction constrained to `CellViewModel` items.\n   117→- **`SnapshotSection` header/footer support**: `header` and `footer` optional parameters in the `SnapshotBuilder` DSL, wired through to `GroupedList.setSections`.\n   118→- **`Snapshot.contains(_:)` and `contains(section:)`**: Convenience queries using the reverse map for O(1) lookups when available.\n   119→\n   120→### Changed\n   121→\n   122→- **BREAKING: SwiftUI view initializers simplified**: `SimpleListView`, `GroupedListView`, and `OutlineListView` CellViewModel-based initializers now accept only layout/structural parameters. Behavioral properties (`onSelect`, `onDelete`, `onRefresh`, `editing`, etc.) must be set via the new chainable modifiers. Inline content initializers retain item-typed behavioral params (e.g., `onSelect`, `onDelete`) since they perform `Data → Item` wrapping.\n   123→- **Refresh control logic consolidated**: Extracted `RefreshControlManager` to replace triplicated refresh control code across `SimpleList`, `GroupedList`, and `OutlineList`.\n   124→- **Example app updated**: All UIKit examples use `ListCellViewModel` and `setListContent()`. `OutlineExampleViewController` uses builder DSL. `SwiftUIWrappersExampleView` demonstrates modifier-based configuration. `LiveExampleViewController` uses `ContentEquatable` for automatic reconfiguration.\n   125→- **Example app: expanded feature coverage**: DSL example uses `GroupedList` with `SnapshotSection` header/footer DSL and `Snapshot.contains(section:)`. GroupedList example demonstrates `@ItemsBuilder`, `ListAccessory.toggle`, `.progress`, and `.activityIndicator`. All three UIKit examples include pull-to-refresh. SwiftUI `GroupedDemoView` demonstrates `.editing` and `.allowsMultipleSelection` modifiers.\n   126→\n   127→### Fixed\n   128→\n   129→- **Chat example separators**: Added explicit `separatorHandler` to `ListsChatExampleViewController` to ensure separators are fully hidden, preventing `itemSeparatorHandler` from overriding `showsSeparators: false`.\n   130→- **Cell reuse accessory leak**: `setListContent()` now unconditionally assigns accessories, preventing stale accessories from persisting across cell reuse.\n   131→- **`ListAccessory.progress` crash**: Replaced `translatesAutoresizingMaskIntoConstraints = false` (which violates `UICellAccessory.customView` requirements) with `reservedLayoutWidth: .custom(60)`.\n   132→\n   133→## [0.4.0] - 2026-02-15\n   134→\n   135→### Added\n   136→\n   137→- **`ListAccessory.toggle`**: Inline `UISwitch` accessory for settings screens with `isOn` binding and `onChange` callback.\n   138→- **`ListAccessory.badge`**: Pill-shaped count/status badge via `BadgeLabel` subclass with tint color propagation.\n   139→- **`ListAccessory.image`**: SF Symbol trailing icon accessory with debug assertions for invalid symbol names.\n   140→- **`ListAccessory.progress`**: Small inline progress bar (60pt width) with out-of-range value assertions.\n   141→- **`ListAccessory.activityIndicator`**: Spinning indicator accessory for loading states.\n   142→\n   143→### Changed\n   144→\n   145→- **`ListAccessory.uiAccessory`** is now `@MainActor`-isolated for UIKit thread safety.\n   146→\n   147→## [0.3.0] - 2026-02-15\n   148→\n   149→### Added\n   150→\n   151→- **Scroll view delegate forwarding**: `SimpleList`, `GroupedList`, and `OutlineList` now forward `UIScrollViewDelegate` callbacks so consumers can receive scroll events without replacing the collection view's delegate.\n   152→- **`collectionViewHandler` and `scrollViewDelegate` parameters** added to `GroupedListView` and `OutlineListView` for API parity with `SimpleListView`.\n   153→- **`selfSizingInvalidation` parameter** on `SimpleList` and `SimpleListView` for controlling cell resize behavior during streaming content.\n   154→- **Chat example**: New `ChatExampleView` demonstrating streaming chat with manual layout invalidation, scroll-to-bottom tracking, and bubble-scoped context menus.\n   155→\n   156→## [0.2.0] - 2026-02-15\n   157→\n   158→### Added\n   159→\n   160→- **`onDelete` callback**: Automatic trailing swipe action generation for item deletion across all list configurations.\n   161→- **`onMove` with drag-and-drop reorder**: Full drag-and-drop reorder infrastructure on `SimpleList` and `GroupedList` with `canMoveItemHandler` and `didMoveItemHandler` callbacks.\n   162→- **`onDeselect` callback**: Multi-selection deselection support forwarded through all SwiftUI wrappers.\n   163→- **`showsSeparators` parameter**: Native UIKit separator visibility toggle on all list configurations and `LayoutHelpers` factory methods.\n   164→- **`ListAccessory.label`**: Text label accessory case.\n   165→- **`ListAccessory.detail`**: Detail accessory with optional action handler.\n   166→- **`ListAccessory.multiselect`**: Multi-selection checkmark accessory.\n   167→- **`ListAccessory.popUpMenu`**: Pop-up menu accessory.\n   168→- **UICollectionLayoutListConfiguration support**: `separatorColor`, `backgroundColor`, `headerTopPadding` across all list types with `separatorHandler` for per-item separator customization.\n   169→- **Header/footer configuration**: `headerMode`/`footerMode` and `headerContentProvider`/`footerContentProvider` on `GroupedList`.\n   170→- **Selection APIs**: `allowsMultipleSelection`, `allowsSelectionDuringEditing`, `allowsMultipleSelectionDuringEditing`, and `isEditing` computed property on all list types.\n   171→- **Navigation APIs**: `itemIdentifier(for:)`, `indexPath(for:)`, and `scrollToItem(_:)` on all list configurations.\n   172→- **`GroupedList.setSections` with `SnapshotBuilder` DSL** for declarative section updates.\n   173→- **`ListLayout` factory methods** for all compositional layout appearance styles.\n   174→- **`dismantleUIView`** added to all SwiftUI wrappers for deterministic cleanup.\n   175→- **`buildLimitedAvailability`** added to all four result builders.\n   176→- **`withTaskCancellationHandler`** support to propagate cancellation from structured parent tasks during SwiftUI coordinator teardown.\n   177→\n   178→### Changed\n   179→\n   180→- **`SectionModel` `Item` constraint** relaxed to `Hashable & Sendable`, fixing inline-content convenience initializers for plain data types.\n   181→- **`SwipeActionBridge` renamed to `ListConfigurationBridge`**: Centralizes shared delegate logic, item navigation, and scroll-to-item into a single bridge to eliminate duplication across list types.\n   182→- **Rapid-render coalescing**: New updates now cancel previous pending applies for faster UI convergence.\n   183→- **UIKit layout closures** wrapped in `MainActor.assumeIsolated` for Swift 6 strict concurrency readiness.\n   184→- **`OutlineList.setItems`** now uses native section snapshot apply instead of flat snapshot rebuild, enabling UIKit's optimized subtree diffing and native expand/collapse animations.\n   185→\n   186→### Fixed\n   187→\n   188→- **Section snapshot parent map corruption**: Fixed `snapshot(of:includingParent:)` where dangling parent references were copied for extracted subtrees.\n   189→- **Multi-selection**: Guard `deselectItem` behind `!allowsMultipleSelection` so multi-selection workflows function correctly.\n   190→- **Snapshot/UI mismatch**: Serialized `applySnapshotUsingReloadData` through the apply task chain to prevent interleaving with animated applies.\n   191→- **Stale snapshot on deallocation**: Always update `currentSnapshot` before the `guard` when `collectionView` is deallocated.\n   192→- **GroupedList header/footer atomicity**: Use merge-then-trim pattern during animated transitions.\n   193→- **Snapshot data loss in move operation**: Validate destination section bounds before deleting item in `moveItemAt`.\n   194→- **`deinit` task cancellation** added to `SimpleList`, `GroupedList`, and `OutlineList` to cancel lingering tasks on deallocation.\n   195→- **Refresh control cleanup**: Use `defer` in `handleRefresh` to ensure `refreshTask` cleanup and spinner dismissal run on all exit paths.\n   196→\n   197→### Performance\n   198→\n   199→- **LIS-based minimal move detection**: Replaced naive diff move detection with longest-increasing-subsequence algorithm using O(n log n) patience sorting, eliminating unnecessary batch update animations.\n   200→\n   201→## [0.1.0] - 2026-02-13\n   202→\n   203→### Added\n   204→\n   205→- **SwiftUI wrappers**: `SimpleListView`, `GroupedListView`, and `OutlineListView` — `UIViewRepresentable` wrappers driven by `@State`.\n   206→- **Inline content API**: `@ViewBuilder` convenience initializers on all three SwiftUI wrappers. Define cell content inline without creating a dedicated `CellViewModel` type.\n   207→- **`SwiftUICellViewModel` protocol**: Protocol for reusable SwiftUI-based cell view models with `body` and `accessories`.\n   208→- **`InlineCellViewModel`**: Type-erased `CellViewModel` backing the inline content API.\n   209→- **`ListAccessory`**: Pure-Swift enum wrapping `UICellAccessory` with a `.custom` escape hatch.\n   210→- **Swipe actions**: Leading and trailing swipe action support on all three list configurations and their SwiftUI wrappers.\n   211→- **Context menus**: Context menu support on all three list configurations and their SwiftUI wrappers.\n   212→- **Pull-to-refresh**: `onRefresh` async closure on all three SwiftUI wrappers with automatic `UIRefreshControl` lifecycle management.\n   213→- **`OutlineItem.mapItems`**: Recursive tree transformation for mapping data types across outline hierarchies.\n   214→- **`OutlineItem` `Equatable` conformance**: Enables diffing in SwiftUI `updateUIView`.\n   215→\n   216→### Changed\n   217→\n   218→- **`OutlineItem` generic constraint** relaxed from `CellViewModel` to `Hashable & Sendable`, enabling use with plain data types.\n   219→- **`SwiftUICellViewModel.accessories`** return type changed from `[UICellAccessory]` to `[ListAccessory]`.\n   220→- **Task serialization** added to `SimpleList.setItems`, `GroupedList.setSections`, and `OutlineList.setItems` to prevent concurrent snapshot applies.\n   221→- **Supplementary view bounds checking** added to `GroupedList` header/footer registration.\n   222→\n   223→## [0.0.1] - 2025-12-20\n   224→\n   225→Initial development release.\n   226→\n   227→### Added\n   228→\n   229→- **ListKit**: O(n) Heckel diff engine, `DiffableDataSourceSnapshot`, `DiffableDataSourceSectionSnapshot`, `CollectionViewDiffableDataSource`.\n   230→- **Lists**: `CellViewModel` protocol, `ListDataSource`, `MixedListDataSource`, `AnyItem`, result-builder DSL (`SnapshotBuilder`, `ItemsBuilder`, `MixedSnapshotBuilder`), `SimpleList`, `GroupedList`, `OutlineList` configurations, layout helpers.\n   231→- Swift 6 strict concurrency support.\n   232→- MIT license.\n   233→"}]},"uuid":"e4ceeecd-7153-47a0-87e4-20dbda2a26ae","timestamp":"2026-02-24T14:59:24.790Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/zer0/Developer/oss/ListKit/CHANGELOG.md","content":"# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [Unreleased]\n\n### Added\n\n- Added `ListConfigurable` protocol that provides shared convenience APIs (`backgroundView`, `allowsMultipleSelection`, `isEditing`, `numberOfItems`, `selectedItems`, `selectItem`, `deselectItem`, `deselectAll`, `scrollToTop`, `scrollToBottom`, `scrollToItem`, and more) via protocol extension — adding a new convenience method to this protocol automatically provides it to `SimpleList`, `GroupedList`, and `OutlineList`\n\n### Changed\n\n- Extracted shared `computeItemsToReconfigure` function from `ListDataSource` and `MixedListDataSource`, deduplicating the autoReconfigure algorithm\n- Extracted shared `flattenSectionSnapshot` function from `ListDataSource` and `MixedListDataSource`, deduplicating the section snapshot flattening logic\n- Removed dead convenience methods from `ListConfigurationBridge` (`scrollToItem`, `selectItem`, `deselectItem`, `isSelected`, `scrollToTop`, `scrollToBottom`) — now provided by `ListConfigurable` protocol extension\n\n### Fixed\n\n- Fixed `MixedListDataSource.apply(_:to:animatingDifferences:)` bypassing `autoReconfigure`, so `ContentEquatable` items now correctly trigger reconfiguration when applied via section snapshots\n- Fixed `OutlineList.setItems` not reconfiguring cells when `CellViewModel` conforms to `ContentEquatable` and content changes but identity stays the same ([#65](https://github.com/Iron-Ham/Lists/issues/65))\n- Fixed context menus not appearing on Mac Catalyst by adopting the iOS 16+ plural `contextMenuConfigurationForItemsAt` delegate method ([#67](https://github.com/Iron-Ham/Lists/issues/67))\n\n## [0.6.5] - 2026-02-20\n\n### Fixed\n\n- Fixed Mac Catalyst refresh control guard to use process-level `UIDevice.current.userInterfaceIdiom` instead of `UIView.behavioralStyle`, which does not resolve correctly before the view is in a window hierarchy\n\n## [0.6.4] - 2026-02-20\n\n### Fixed\n\n- Fixed crash when `onRefresh` is set on Mac Catalyst in Mac idiom — `UIRefreshControl` is now skipped when `behavioralStyle == .mac`, while apps using iPad idiom on Catalyst continue to get pull-to-refresh\n\n## [0.6.3] - 2026-02-20\n\n### Added\n\n- Comprehensive animated apply test suite (21 tests) covering section insert/delete/move/replace, item reorder and cross-section moves, non-structural reload/reconfigure fast path, structural changes with deferred reload/reconfigure markers, background diff with large datasets (≥1,000 items), and rapid-fire serialization edge cases\n- Deterministic cancellation tests verifying completion callback invocation and snapshot invariant safety when `applyTask` is cancelled mid-chain\n\n### Fixed\n\n- Completion handler `apply()` variant now supports cooperative cancellation and always invokes the completion callback (even when cancelled), preventing silent hangs for callers using `withCheckedContinuation`\n- `performBatchUpdates` completion handler now checks the `finished` parameter — deferred reloads/reconfigures are skipped when UIKit interrupts the batch update\n\n## [0.6.2] - 2026-02-19\n\n### Fixed\n\n- Fixed `NSInternalInconsistencyException` crash when applying snapshots with only inserts (no deletes) using animated differences — `currentSnapshot` is now updated inside the `performBatchUpdates` closure so UIKit sees correct pre/post item counts\n\n### Added\n\n- Animated apply regression tests covering pure inserts, pure deletes, empty↔populated transitions, and mixed cross-section operations\n\n## [0.6.1] - 2026-02-18\n\n### Changed\n\n- `CollectionViewDiffableDataSource.performApply()` now offloads diff computation to a background thread for snapshots with ≥1,000 items, keeping the main thread free during large dataset updates\n\n### Added\n\n- Realistic UUID-based benchmarks comparing ListKit vs Apple using the `Item.ID` pattern with `Identifiable` model types\n- Mixed operations benchmarks testing inserts + deletes + moves simultaneously across ListKit, Apple, and IGListKit\n- Data source `apply()` benchmarks measuring the full end-to-end pipeline (diff + `performBatchUpdates`) for ListKit vs Apple\n\n### Fixed\n\n- `speedup()` benchmark helper now correctly handles durations >= 1 second (previously ignored the `seconds` component)\n\n## [0.6.0] - 2026-02-16\n\n### Added\n\n- **Snapshot `Equatable` conformance**: `DiffableDataSourceSnapshot` now conforms to `Equatable`, comparing section identifiers and item arrays while ignoring transient reload/reconfigure markers.\n- **Snapshot `init(sections:)` convenience initializer**: Build snapshots from `[(SectionID, [ItemID])]` pairs in a single call.\n- **`sectionIdentifier(at:)` on `DiffableDataSourceSnapshot`**: Index-based section lookup, complementing the existing `index(ofSection:)`.\n- **`replaceItems(in:with:)` on `DiffableDataSourceSnapshot`**: Bulk-replace all items in a section without deleting/re-appending the section.\n- **`removeItems(where:)` on `DiffableDataSourceSnapshot`**: Remove items matching a predicate across all sections, following `removeAll(where:)` convention.\n- **`children(of:)` on `DiffableDataSourceSectionSnapshot`**: Returns direct children of a given item, complementing the existing `parent(of:)`.\n- **Programmatic selection**: `selectItem(_:at:animated:)`, `deselectItem(_:animated:)`, and `isSelected(_:)` on `SimpleList`, `GroupedList`, and `OutlineList`.\n- **`shouldSelect` handler**: Closure on all three configurations (+ SwiftUI modifiers) that gates item selection via the `collectionView(_:shouldSelectItemAt:)` delegate.\n- **`backgroundView` property**: Auto-visibility empty-state view on all three configurations (+ SwiftUI modifiers), shown when the list is empty and hidden when it has content.\n- **`canMoveItemProvider`**: Per-item reorder predicate on `SimpleList` and `GroupedList` (+ SwiftUI modifiers).\n- **`scrollToTop` / `scrollToBottom`**: Convenience scroll methods on all three configurations.\n- **OutlineList tree queries**: `allItems`, `visibleItems`, `rootItems`, `parent(of:)`, and `level(of:)` for inspecting the outline hierarchy.\n- **`SimpleList.items`**: Convenience accessor for the current items in the list.\n- **Snapshot type aliases**: `SimpleList.Snapshot`, `GroupedList.Snapshot`, `OutlineList.Snapshot` for ergonomic snapshot type references.\n- **`MixedSection` header/footer support**: Optional `header` and `footer` parameters on `MixedSection`, wired through `MixedListDataSource.apply(content:)` with `headerForSection(_:)`/`footerForSection(_:)` accessors and a `configureListHeaderFooterProvider()` convenience method for automatic supplementary view rendering.\n- **`MixedListDataSource` reorder support**: `canMoveItemHandler` and `didMoveItemHandler` properties for drag-and-drop reordering parity with `ListDataSource`.\n- **Section query methods on `GroupedList`**: `sectionIdentifier(for:)`, `index(for:)`, and `items(in:)` for section-level navigation.\n- **`OutlineList` programmatic expand/collapse**: `expand(_:animated:)`, `collapse(_:animated:)`, and `isExpanded(_:)` methods for controlling outline hierarchy without rebuilding the tree.\n- **`onMove` SwiftUI modifier**: `.onMove()` modifier on `SimpleListView` and `GroupedListView` for drag-and-drop reordering, completing the SwiftUI wrapper API.\n- **Convenience query properties**: `numberOfItems`, `numberOfSections`, `selectedItems`, and `deselectAll(animated:)` on all three configurations (`SimpleList`, `GroupedList`, `OutlineList`).\n- **`SectionModel.mapItems(_:)`**: Transforms items within a section while preserving metadata, matching `OutlineItem.mapItems(_:)` for API consistency.\n- **`SectionModel` `Identifiable` conformance**: Enables direct use in SwiftUI `ForEach` and other `Identifiable`-requiring contexts.\n- **`OutlineItem` `Identifiable` conformance**: Uses `item` as identity, enabling direct use in SwiftUI contexts.\n\n## [0.5.0] - 2026-02-16\n\n### Added\n\n- **UIKit chat examples**: Two new UIKit counterparts to the existing SwiftUI chat example — `ListsChatExampleViewController` (`SimpleList` + `CellViewModel` + `UIHostingConfiguration`) and `ListKitChatExampleViewController` (raw `CollectionViewDiffableDataSource` with pure UIKit cells and manual cell reconfiguration).\n- **Shared chat input bar**: Reusable `ChatInputBar` UIKit view with keyboard layout guide support.\n- **`ListCellViewModel` protocol**: Convenience refinement of `CellViewModel` that defaults `Cell` to `UICollectionViewListCell`, eliminating the most common boilerplate `typealias`.\n- **`UICollectionViewListCell.setListContent()` helpers**: Two convenience methods (parameter-based and closure-based) that replace the repetitive 4-line content configuration pattern with a single call.\n- **SwiftUI-style view modifiers**: Chainable `.onSelect`, `.onDelete`, `.onRefresh`, `.editing`, `.contextMenu`, `.trailingSwipeActions`, `.leadingSwipeActions`, and more on `SimpleListView`, `GroupedListView`, and `OutlineListView`. Replaces the 19+ parameter initializer with an idiomatic init-then-modify pattern.\n- **Pull-to-refresh on UIKit configurations**: `onRefresh` property on `SimpleList`, `GroupedList`, and `OutlineList` with proper async task lifecycle management, bringing parity with the SwiftUI wrappers.\n- **`ContentEquatable` protocol**: Opt-in protocol for detecting content changes in identity-based view models. Automatically marks items for reconfiguration when content differs, solving the stale-UI footgun with `Identifiable` types.\n- **`OutlineItemBuilder` result builder**: Declarative trailing-closure syntax for constructing `OutlineItem` hierarchies with full support for conditionals, loops, and arrays.\n- **`SectionModel` `@ItemsBuilder` initializer**: Declarative builder-based section construction constrained to `CellViewModel` items.\n- **`SnapshotSection` header/footer support**: `header` and `footer` optional parameters in the `SnapshotBuilder` DSL, wired through to `GroupedList.setSections`.\n- **`Snapshot.contains(_:)` and `contains(section:)`**: Convenience queries using the reverse map for O(1) lookups when available.\n\n### Changed\n\n- **BREAKING: SwiftUI view initializers simplified**: `SimpleListView`, `GroupedListView`, and `OutlineListView` CellViewModel-based initializers now accept only layout/structural parameters. Behavioral properties (`onSelect`, `onDelete`, `onRefresh`, `editing`, etc.) must be set via the new chainable modifiers. Inline content initializers retain item-typed behavioral params (e.g., `onSelect`, `onDelete`) since they perform `Data → Item` wrapping.\n- **Refresh control logic consolidated**: Extracted `RefreshControlManager` to replace triplicated refresh control code across `SimpleList`, `GroupedList`, and `OutlineList`.\n- **Example app updated**: All UIKit examples use `ListCellViewModel` and `setListContent()`. `OutlineExampleViewController` uses builder DSL. `SwiftUIWrappersExampleView` demonstrates modifier-based configuration. `LiveExampleViewController` uses `ContentEquatable` for automatic reconfiguration.\n- **Example app: expanded feature coverage**: DSL example uses `GroupedList` with `SnapshotSection` header/footer DSL and `Snapshot.contains(section:)`. GroupedList example demonstrates `@ItemsBuilder`, `ListAccessory.toggle`, `.progress`, and `.activityIndicator`. All three UIKit examples include pull-to-refresh. SwiftUI `GroupedDemoView` demonstrates `.editing` and `.allowsMultipleSelection` modifiers.\n\n### Fixed\n\n- **Chat example separators**: Added explicit `separatorHandler` to `ListsChatExampleViewController` to ensure separators are fully hidden, preventing `itemSeparatorHandler` from overriding `showsSeparators: false`.\n- **Cell reuse accessory leak**: `setListContent()` now unconditionally assigns accessories, preventing stale accessories from persisting across cell reuse.\n- **`ListAccessory.progress` crash**: Replaced `translatesAutoresizingMaskIntoConstraints = false` (which violates `UICellAccessory.customView` requirements) with `reservedLayoutWidth: .custom(60)`.\n\n## [0.4.0] - 2026-02-15\n\n### Added\n\n- **`ListAccessory.toggle`**: Inline `UISwitch` accessory for settings screens with `isOn` binding and `onChange` callback.\n- **`ListAccessory.badge`**: Pill-shaped count/status badge via `BadgeLabel` subclass with tint color propagation.\n- **`ListAccessory.image`**: SF Symbol trailing icon accessory with debug assertions for invalid symbol names.\n- **`ListAccessory.progress`**: Small inline progress bar (60pt width) with out-of-range value assertions.\n- **`ListAccessory.activityIndicator`**: Spinning indicator accessory for loading states.\n\n### Changed\n\n- **`ListAccessory.uiAccessory`** is now `@MainActor`-isolated for UIKit thread safety.\n\n## [0.3.0] - 2026-02-15\n\n### Added\n\n- **Scroll view delegate forwarding**: `SimpleList`, `GroupedList`, and `OutlineList` now forward `UIScrollViewDelegate` callbacks so consumers can receive scroll events without replacing the collection view's delegate.\n- **`collectionViewHandler` and `scrollViewDelegate` parameters** added to `GroupedListView` and `OutlineListView` for API parity with `SimpleListView`.\n- **`selfSizingInvalidation` parameter** on `SimpleList` and `SimpleListView` for controlling cell resize behavior during streaming content.\n- **Chat example**: New `ChatExampleView` demonstrating streaming chat with manual layout invalidation, scroll-to-bottom tracking, and bubble-scoped context menus.\n\n## [0.2.0] - 2026-02-15\n\n### Added\n\n- **`onDelete` callback**: Automatic trailing swipe action generation for item deletion across all list configurations.\n- **`onMove` with drag-and-drop reorder**: Full drag-and-drop reorder infrastructure on `SimpleList` and `GroupedList` with `canMoveItemHandler` and `didMoveItemHandler` callbacks.\n- **`onDeselect` callback**: Multi-selection deselection support forwarded through all SwiftUI wrappers.\n- **`showsSeparators` parameter**: Native UIKit separator visibility toggle on all list configurations and `LayoutHelpers` factory methods.\n- **`ListAccessory.label`**: Text label accessory case.\n- **`ListAccessory.detail`**: Detail accessory with optional action handler.\n- **`ListAccessory.multiselect`**: Multi-selection checkmark accessory.\n- **`ListAccessory.popUpMenu`**: Pop-up menu accessory.\n- **UICollectionLayoutListConfiguration support**: `separatorColor`, `backgroundColor`, `headerTopPadding` across all list types with `separatorHandler` for per-item separator customization.\n- **Header/footer configuration**: `headerMode`/`footerMode` and `headerContentProvider`/`footerContentProvider` on `GroupedList`.\n- **Selection APIs**: `allowsMultipleSelection`, `allowsSelectionDuringEditing`, `allowsMultipleSelectionDuringEditing`, and `isEditing` computed property on all list types.\n- **Navigation APIs**: `itemIdentifier(for:)`, `indexPath(for:)`, and `scrollToItem(_:)` on all list configurations.\n- **`GroupedList.setSections` with `SnapshotBuilder` DSL** for declarative section updates.\n- **`ListLayout` factory methods** for all compositional layout appearance styles.\n- **`dismantleUIView`** added to all SwiftUI wrappers for deterministic cleanup.\n- **`buildLimitedAvailability`** added to all four result builders.\n- **`withTaskCancellationHandler`** support to propagate cancellation from structured parent tasks during SwiftUI coordinator teardown.\n\n### Changed\n\n- **`SectionModel` `Item` constraint** relaxed to `Hashable & Sendable`, fixing inline-content convenience initializers for plain data types.\n- **`SwipeActionBridge` renamed to `ListConfigurationBridge`**: Centralizes shared delegate logic, item navigation, and scroll-to-item into a single bridge to eliminate duplication across list types.\n- **Rapid-render coalescing**: New updates now cancel previous pending applies for faster UI convergence.\n- **UIKit layout closures** wrapped in `MainActor.assumeIsolated` for Swift 6 strict concurrency readiness.\n- **`OutlineList.setItems`** now uses native section snapshot apply instead of flat snapshot rebuild, enabling UIKit's optimized subtree diffing and native expand/collapse animations.\n\n### Fixed\n\n- **Section snapshot parent map corruption**: Fixed `snapshot(of:includingParent:)` where dangling parent references were copied for extracted subtrees.\n- **Multi-selection**: Guard `deselectItem` behind `!allowsMultipleSelection` so multi-selection workflows function correctly.\n- **Snapshot/UI mismatch**: Serialized `applySnapshotUsingReloadData` through the apply task chain to prevent interleaving with animated applies.\n- **Stale snapshot on deallocation**: Always update `currentSnapshot` before the `guard` when `collectionView` is deallocated.\n- **GroupedList header/footer atomicity**: Use merge-then-trim pattern during animated transitions.\n- **Snapshot data loss in move operation**: Validate destination section bounds before deleting item in `moveItemAt`.\n- **`deinit` task cancellation** added to `SimpleList`, `GroupedList`, and `OutlineList` to cancel lingering tasks on deallocation.\n- **Refresh control cleanup**: Use `defer` in `handleRefresh` to ensure `refreshTask` cleanup and spinner dismissal run on all exit paths.\n\n### Performance\n\n- **LIS-based minimal move detection**: Replaced naive diff move detection with longest-increasing-subsequence algorithm using O(n log n) patience sorting, eliminating unnecessary batch update animations.\n\n## [0.1.0] - 2026-02-13\n\n### Added\n\n- **SwiftUI wrappers**: `SimpleListView`, `GroupedListView`, and `OutlineListView` — `UIViewRepresentable` wrappers driven by `@State`.\n- **Inline content API**: `@ViewBuilder` convenience initializers on all three SwiftUI wrappers. Define cell content inline without creating a dedicated `CellViewModel` type.\n- **`SwiftUICellViewModel` protocol**: Protocol for reusable SwiftUI-based cell view models with `body` and `accessories`.\n- **`InlineCellViewModel`**: Type-erased `CellViewModel` backing the inline content API.\n- **`ListAccessory`**: Pure-Swift enum wrapping `UICellAccessory` with a `.custom` escape hatch.\n- **Swipe actions**: Leading and trailing swipe action support on all three list configurations and their SwiftUI wrappers.\n- **Context menus**: Context menu support on all three list configurations and their SwiftUI wrappers.\n- **Pull-to-refresh**: `onRefresh` async closure on all three SwiftUI wrappers with automatic `UIRefreshControl` lifecycle management.\n- **`OutlineItem.mapItems`**: Recursive tree transformation for mapping data types across outline hierarchies.\n- **`OutlineItem` `Equatable` conformance**: Enables diffing in SwiftUI `updateUIView`.\n\n### Changed\n\n- **`OutlineItem` generic constraint** relaxed from `CellViewModel` to `Hashable & Sendable`, enabling use with plain data types.\n- **`SwiftUICellViewModel.accessories`** return type changed from `[UICellAccessory]` to `[ListAccessory]`.\n- **Task serialization** added to `SimpleList.setItems`, `GroupedList.setSections`, and `OutlineList.setItems` to prevent concurrent snapshot applies.\n- **Supplementary view bounds checking** added to `GroupedList` header/footer registration.\n\n## [0.0.1] - 2025-12-20\n\nInitial development release.\n\n### Added\n\n- **ListKit**: O(n) Heckel diff engine, `DiffableDataSourceSnapshot`, `DiffableDataSourceSectionSnapshot`, `CollectionViewDiffableDataSource`.\n- **Lists**: `CellViewModel` protocol, `ListDataSource`, `MixedListDataSource`, `AnyItem`, result-builder DSL (`SnapshotBuilder`, `ItemsBuilder`, `MixedSnapshotBuilder`), `SimpleList`, `GroupedList`, `OutlineList` configurations, layout helpers.\n- Swift 6 strict concurrency support.\n- MIT license.\n","numLines":233,"startLine":1,"totalLines":233}},"sourceToolAssistantUUID":"d0bfe09c-9125-428a-9f52-63245099065f"}
{"parentUuid":"e4ceeecd-7153-47a0-87e4-20dbda2a26ae","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","slug":"sequential-brewing-ember","message":{"model":"claude-opus-4-6","id":"msg_01U9kE9sXcMSqcX2S6uu68EC","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01BAuaGzYH2iUGbCaW6ZK3uA","name":"Glob","input":{"pattern":"**/Package.swift","path":"/Users/zer0/Developer/oss/ListKit"},"caller":{"type":"direct"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":7840,"cache_read_input_tokens":9575,"cache_creation":{"ephemeral_5m_input_tokens":7840,"ephemeral_1h_input_tokens":0},"output_tokens":11,"service_tier":"standard","inference_geo":"global"}},"requestId":"req_011CYT6K84uwb7anzeok6bmi","type":"assistant","uuid":"019fa5f7-5b8d-4e6d-be64-42ecbef40c18","timestamp":"2026-02-24T14:59:25.569Z"}
{"parentUuid":"019fa5f7-5b8d-4e6d-be64-42ecbef40c18","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","slug":"sequential-brewing-ember","message":{"model":"claude-opus-4-6","id":"msg_01U9kE9sXcMSqcX2S6uu68EC","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01LA5sihLNBHdPq9p6sRAvsi","name":"Bash","input":{"command":"git tag --sort=-v:refname | head -10","description":"List recent git tags"},"caller":{"type":"direct"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":7840,"cache_read_input_tokens":9575,"cache_creation":{"ephemeral_5m_input_tokens":7840,"ephemeral_1h_input_tokens":0},"output_tokens":11,"service_tier":"standard","inference_geo":"global"}},"requestId":"req_011CYT6K84uwb7anzeok6bmi","type":"assistant","uuid":"d0293857-0511-47a0-b193-61cabb9440db","timestamp":"2026-02-24T14:59:26.395Z"}
{"parentUuid":"d0293857-0511-47a0-b193-61cabb9440db","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","slug":"sequential-brewing-ember","type":"progress","data":{"type":"hook_progress","hookEvent":"PostToolUse","hookName":"PostToolUse:Glob","command":"callback"},"parentToolUseID":"toolu_01BAuaGzYH2iUGbCaW6ZK3uA","toolUseID":"toolu_01BAuaGzYH2iUGbCaW6ZK3uA","timestamp":"2026-02-24T14:59:26.512Z","uuid":"45691dad-5e77-47f1-a43f-65b4655ded9a"}
{"parentUuid":"019fa5f7-5b8d-4e6d-be64-42ecbef40c18","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","slug":"sequential-brewing-ember","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01BAuaGzYH2iUGbCaW6ZK3uA","type":"tool_result","content":"/Users/zer0/Developer/oss/ListKit/.build/checkouts/ReactiveCollectionsKit/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/checkouts/IGListKit/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/ReactiveCollectionsKit/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/IGListKit/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Package.swift\n/Users/zer0/Developer/oss/ListKit/.REDACTED.swift\n/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/MixedTargets/Package.swift\n/Users/zer0/Developer/oss/ListKit/.REDACTED.swift\n/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/PackageWithSnippets/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/SingleExecutableTarget/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/SingleLibraryTarget/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/SingleTestTarget/Package.swift\n/Users/zer0/Developer/oss/ListKit/.REDACTED.swift\n/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/TargetsWithDependencies/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-symbolkit/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-symbolkit/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Package.swift\n/Users/zer0/Developer/oss/ListKit/.REDACTED.swift\n/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/MixedTargets/Package.swift\n/Users/zer0/Developer/oss/ListKit/.REDACTED.swift\n/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/PackageWithSnippets/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/SingleExecutableTarget/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/SingleLibraryTarget/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/SingleTestTarget/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/TargetWithDocCCatalog/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/TargetsWithDependencies/Package.swift\n/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/Package.swift\n/Users/zer0/Developer/oss/ListKit/Package.swift"}]},"uuid":"cf4f5a53-13b5-4284-a1b1-dc54f6a8df09","timestamp":"2026-02-24T14:59:26.507Z","toolUseResult":{"filenames":["/Users/zer0/Developer/oss/ListKit/.build/checkouts/ReactiveCollectionsKit/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/checkouts/IGListKit/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/ReactiveCollectionsKit/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/IGListKit/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Package.swift","/Users/zer0/Developer/oss/ListKit/.REDACTED.swift","/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/MixedTargets/Package.swift","/Users/zer0/Developer/oss/ListKit/.REDACTED.swift","/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/PackageWithSnippets/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/SingleExecutableTarget/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/SingleLibraryTarget/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/SingleTestTarget/Package.swift","/Users/zer0/Developer/oss/ListKit/.REDACTED.swift","/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/TargetsWithDependencies/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-plugin/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/index-build/checkouts/swift-docc-symbolkit/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-symbolkit/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Package.swift","/Users/zer0/Developer/oss/ListKit/.REDACTED.swift","/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/MixedTargets/Package.swift","/Users/zer0/Developer/oss/ListKit/.REDACTED.swift","/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/PackageWithSnippets/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/SingleExecutableTarget/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/SingleLibraryTarget/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/SingleTestTarget/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/TargetWithDocCCatalog/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/IntegrationTests/Tests/Fixtures/TargetsWithDependencies/Package.swift","/Users/zer0/Developer/oss/ListKit/.build/checkouts/swift-docc-plugin/Package.swift","/Users/zer0/Developer/oss/ListKit/Package.swift"],"durationMs":923,"numFiles":29,"truncated":false},"sourceToolAssistantUUID":"019fa5f7-5b8d-4e6d-be64-42ecbef40c18"}
{"parentUuid":"d0293857-0511-47a0-b193-61cabb9440db","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","slug":"sequential-brewing-ember","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01LA5sihLNBHdPq9p6sRAvsi","type":"tool_result","content":"0.6.5\n0.6.4\n0.6.3\n0.6.2\n0.6.1\n0.6.0\n0.5.0\n0.4.0\n0.3.0\n0.2.0","is_error":false}]},"uuid":"2c0da113-3752-4617-8617-090820748ca5","timestamp":"2026-02-24T14:59:27.485Z","toolUseResult":{"stdout":"0.6.5\n0.6.4\n0.6.3\n0.6.2\n0.6.1\n0.6.0\n0.5.0\n0.4.0\n0.3.0\n0.2.0","stderr":"","interrupted":false,"isImage":false,"noOutputExpected":false},"sourceToolAssistantUUID":"d0293857-0511-47a0-b193-61cabb9440db"}
{"parentUuid":"2c0da113-3752-4617-8617-090820748ca5","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","slug":"sequential-brewing-ember","message":{"model":"claude-opus-4-6","id":"msg_019C8SYw16LyGLufpnwJNDLg","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Current state:\n- Latest tag: `0.6.5`\n- Next patch: `0.6.6`\n- There's an `[Unreleased]` section with Added, Changed, and Fixed entries\n\nLooking at the unreleased changes, there's a mix of Added (new `ListConfigurable` protocol), Changed (refactoring/deduplication), and Fixed (several bug fixes). This looks like it could be a patch release (0.6.6) since the changes are bug fixes, refactors, and minor additions.\n\nLet me look at the previous release PRs to understand the release process. Let me check if there's a specific release process documented.\n\n\nLooking at the recent commits, I can see the release workflow: they create a branch, update the changelog by moving the Unreleased section to a versioned entry with a date, open a PR, merge it, and then tag the release. Let me examine the previous release PR to confirm this pattern.\n\nNow I'm ready to proceed with 0.6.6 — I'll create a branch called `Iron-Ham/release-0.6.6`, update the changelog to stamp `[Unreleased]` as `[0.6.6] - 2026-02-24`, add a fresh Unreleased section, commit the change, and push it up for a PR.\n\nLet me first look at how the previous release formatted the changelog to make sure I match the exact pattern.","signature":"EvENCkYICxgCKkCFlAgFaaOgXyHT/yS+eUfrXbTOruDCm+pGSsnXd+GmKWMVF/26bwk/jur57UvSI/M+qDaZOrre7jDStjYW0TnREgyZ14R96+2o7PKpj48aDMt2d6/Fo7nL42F/lyIwHubDuTrFWsysTNNIjviTgBpf3Q2RTEIXKc8BEOBziay51S/HFkrrlUsFSHBIbPTIKtgMjTdkTi957ff6ZEZnRn7b292id9YmyA57sTtEAMbnGCAA8xJjlOqQQwvdHQLSAy+gsAIRISMHu379yeVGtuYxjYJ8D7jcPATGwzpm68fVqMj4WszaCvxXabWiPIDKCdUBKUQCGV6sFaarZOV+NdBnBKjXxlS5tbTAmMiNWa7cPmAjXFMzbDfESF8TPmq2TAZTjMZ4L4m/EiuUY0vWyczEvCenkaOYC2Pe4EQSw6mwrNNvSkrCzMP7rBgfuD+bc+V+ttDmhSbtEPtD/RvkFV/FQQ+PQ5wzo4eLnKxJMJ3dJgUOg5NSpFeBe8OOEMCm4r5ZAOLA75qD4KyF3PTlsOfALlsJIg12yL0IumTxpaFpOOy/JeO30z/Vwk+7uXr2ICWcgYmEXNYj299BV/hIvyizvwWsOTuDRnTGn3XUL9rxmeLlPAGOCAepns+xEK8tC0u1zAk4yg72FrlL58Oskj8sUQfiQnV6cSinVPw/Zp5hlZdTPcToqrDIYGMlHA4OxFthaREfnZscisNiloMspP7uQYPBFq0ch7nkys70LOr1GpslHKS5ycrlm4vVebwtsTCcude1i1QvmsB47T7eb5nZ3cxezVdKuLxtrX3WuvcCxO5/A4eHFZpvmBOe3THtRlFtys4k91usrYPy5seZu8QrcSa5X3y2px9f1ClAUDzK8iWstmlm2xcaJlpeqF3mXWM6Djr06sPiIr/RXSWLY2DNgxkg+Km32KybQnJm+YjPBHX3kbHQJY6m0KBRTCcLBn+QAMxoyA8fYgVk68naasnawV3+CNJEUUyTMfqQx0xFsbX9Huhwjd/HyQYpZBatI5H903m6jGAPKZSmNa9noA0zgjKB7bY6ADTFOQavxnuUnPj/KvmE36SBkUjzk5R3wVGQ4GIi3HChu3yhhNUqfRKSxbF8j1UbKgwZUo31Xp3YAYwbaAMhebSdQqWHDfdgCoCmSDITixeX7q4JnETR9kULI0ZgOsCY+sWSkbnMtEgle2iArKsA9qLpfHV2w4HUoKwSHYDuxuLw4e8I1NNsBXahW1wGBuupnjSqNYVKxaUV5+NjS9wtqR25xM7hT6zb4dQj+foDcQbmfQ4v2DkUeJVY6mbBtJI5bOfcDPmTD5O0WRg82REb2gel7IeL3Oel6S6Jmu1m6UZjD4E1TekmEsL1oxDylO+gFp7q/PXXo+kem0aCy59D7lQNut3EpA7OgzsOLHlwpDAxAjvmcarhj9eSsdBqT7KgInnvxUpE33BN+arsjUcbuiYic6LvbB0CcxrM8pqxVZX9FGsf5a6qh0s7zOFzrmdmik15BihxoO+9zPHn/ZBXwnR8V2AwuVLKlxELBkVESO89yRdIKnurRYhD3m5EDspxnxx71O7A39lYPUtk/wAIvgTZK3ED5WzHhndmaTJBNvcO/SQVnQHHJLCCB5qEOwNd1GoaUime8ynFEpB/jdZmgRj+xsV8n77xdtSHNXFR8vQfr0nQyZJOYEop3SuwYjhhrM/h/JNI+qMykozrp/j385Nx6g+7M2JeN5lEVY9cbbM3wfUrmhEFepdKhAAAOAWoIW44h6a/n9ile9kdY9R/aMlrJqqY/3ScYGrAlE4ZAQuSthMoy7fou27BJLQgTIvwEsRH5VpS+cqJhs0ojTVTbxcxyYlf5iJ5gI/VQkTLWqgRTcipTehEt9TEdkO0ebiiCApv8gVbXaplufgL9u1kHWaNPYUDxXJZ0s8488x5rurTx8rtAvL47l271NOT7BR5ldWeKyhnd3Wa58pTzUBPVJYv9Y3powbzqiNn9TC1q9ElMvTJJyCy/qrwNm/RIsyWV2F92vspbLyAtdPQFelrcxqZaOT0OP5sbr5crzGeqktUmfZ3UzxAycjX+wQkgrGpnVIXOkikbsdnvZOBo9QUbz+LWwD/SKaH14AsTvdoTtqQEOne7n6kYVyI3AqA1eowaTQk4K7GlThnw43onTVmFUI20SvvlAFEPcg08TLrFu5HgjE62Ca2aQkHnBwQSGjvKZZGdsFcZ+SvK2NjHZvH4t8N6J05uEcvY977r+ox7AhfVZW7EI2IPzxn4VF9TsotgnwA2BoNqpIvoIIs2Oz5eYqQ3HAejwRUvD8ABHw3DBNrIVwWU9jQo6RrRj4cQZ+6e+ThFy/0Up+k59I1t1lIJLaoIRgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":7804,"cache_read_input_tokens":17415,"cache_creation":{"ephemeral_5m_input_tokens":7804,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard","inference_geo":"global"}},"requestId":"req_011CYT6KmnoLFxUhV68j3vvJ","type":"assistant","uuid":"3a708ff3-b83c-4a78-a18e-4efeff0b6dd4","timestamp":"2026-02-24T14:59:42.766Z"}
{"parentUuid":"3a708ff3-b83c-4a78-a18e-4efeff0b6dd4","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","slug":"sequential-brewing-ember","message":{"model":"claude-opus-4-6","id":"msg_019C8SYw16LyGLufpnwJNDLg","type":"message","role":"assistant","content":[{"type":"text","text":"Here's the current state:\n- **Latest tag**: `0.6.5`\n- **Next patch**: `0.6.6`\n- **Unreleased changes**: 1 addition (`ListConfigurable` protocol), 3 refactoring changes, and 3 bug fixes\n\n`★ Insight ─────────────────────────────────────`\nLooking at the commit history, this project follows a \"stamp the changelog\" release pattern — the `[Unreleased]` section gets renamed to the new version with today's date, a fresh empty `[Unreleased]` section is added on top, and the change goes through a PR. The previous release (`0.6.5`) followed this exact flow in commit `b3c78e50`.\n`─────────────────────────────────────────────────`\n\nLet me create the release branch and stamp the changelog."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":7804,"cache_read_input_tokens":17415,"cache_creation":{"ephemeral_5m_input_tokens":7804,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard","inference_geo":"global"}},"requestId":"req_011CYT6KmnoLFxUhV68j3vvJ","type":"assistant","uuid":"3b2eede0-ab09-4de3-9ba4-18355cb9b79d","timestamp":"2026-02-24T14:59:46.455Z"}
{"parentUuid":"3b2eede0-ab09-4de3-9ba4-18355cb9b79d","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","slug":"sequential-brewing-ember","message":{"model":"claude-opus-4-6","id":"msg_019C8SYw16LyGLufpnwJNDLg","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_014NwDgoEyFcvafsdvhBxdtL","name":"Bash","input":{"command":"git checkout -b Iron-Ham/release-0.6.6","description":"Create release branch"},"caller":{"type":"direct"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":7804,"cache_read_input_tokens":17415,"output_tokens":840,"server_tool_use":{"web_search_requests":0,"web_fetch_requests":0},"service_tier":"standard","cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":7804},"inference_geo":"","iterations":[],"speed":"standard"}},"requestId":"req_011CYT6KmnoLFxUhV68j3vvJ","type":"assistant","uuid":"22633b4b-bcf2-4c11-822b-e695af537310","timestamp":"2026-02-24T14:59:47.135Z"}
{"parentUuid":"22633b4b-bcf2-4c11-822b-e695af537310","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"main","slug":"sequential-brewing-ember","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_014NwDgoEyFcvafsdvhBxdtL","type":"tool_result","content":"Switched to a new branch 'Iron-Ham/release-0.6.6'","is_error":false}]},"uuid":"c7d51a8b-b71b-40f1-a8d5-bd52b456600c","timestamp":"2026-02-24T14:59:47.235Z","toolUseResult":{"stdout":"Switched to a new branch 'Iron-Ham/release-0.6.6'","stderr":"","interrupted":false,"isImage":false,"noOutputExpected":false},"sourceToolAssistantUUID":"22633b4b-bcf2-4c11-822b-e695af537310"}
{"type":"file-history-snapshot","messageId":"82df70bb-3ba8-427d-9a2a-c26dfd888137","snapshot":{"messageId":"393c119d-7a62-4589-8cb3-86de518192cd","trackedFileBackups":{"CHANGELOG.md":{"backupFileName":"21231ad59130a697@v1","version":1,"backupTime":"2026-02-24T15:00:02.274Z"}},"timestamp":"2026-02-24T14:59:18.482Z"},"isSnapshotUpdate":true}
{"parentUuid":"c7d51a8b-b71b-40f1-a8d5-bd52b456600c","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"Iron-Ham/release-0.6.6","slug":"sequential-brewing-ember","message":{"model":"claude-opus-4-6","id":"msg_01R566oP9CeJ9cZZzeC8yU6P","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01BtKQVkheHvL6yC22AoMRkq","name":"Edit","input":{"replace_all":false,"file_path":"/Users/zer0/Developer/oss/ListKit/CHANGELOG.md","old_string":"## [Unreleased]\n\n### Added\n\n- Added `ListConfigurable` protocol that provides shared convenience APIs (`backgroundView`, `allowsMultipleSelection`, `isEditing`, `numberOfItems`, `selectedItems`, `selectItem`, `deselectItem`, `deselectAll`, `scrollToTop`, `scrollToBottom`, `scrollToItem`, and more) via protocol extension — adding a new convenience method to this protocol automatically provides it to `SimpleList`, `GroupedList`, and `OutlineList`\n\n### Changed\n\n- Extracted shared `computeItemsToReconfigure` function from `ListDataSource` and `MixedListDataSource`, deduplicating the autoReconfigure algorithm\n- Extracted shared `flattenSectionSnapshot` function from `ListDataSource` and `MixedListDataSource`, deduplicating the section snapshot flattening logic\n- Removed dead convenience methods from `ListConfigurationBridge` (`scrollToItem`, `selectItem`, `deselectItem`, `isSelected`, `scrollToTop`, `scrollToBottom`) — now provided by `ListConfigurable` protocol extension\n\n### Fixed\n\n- Fixed `MixedListDataSource.apply(_:to:animatingDifferences:)` bypassing `autoReconfigure`, so `ContentEquatable` items now correctly trigger reconfiguration when applied via section snapshots\n- Fixed `OutlineList.setItems` not reconfiguring cells when `CellViewModel` conforms to `ContentEquatable` and content changes but identity stays the same ([#65](https://github.com/Iron-Ham/Lists/issues/65))\n- Fixed context menus not appearing on Mac Catalyst by adopting the iOS 16+ plural `contextMenuConfigurationForItemsAt` delegate method ([#67](https://github.com/Iron-Ham/Lists/issues/67))\n\n## [0.6.5] - 2026-02-20","new_string":"## [Unreleased]\n\n## [0.6.6] - 2026-02-24\n\n### Added\n\n- Added `ListConfigurable` protocol that provides shared convenience APIs (`backgroundView`, `allowsMultipleSelection`, `isEditing`, `numberOfItems`, `selectedItems`, `selectItem`, `deselectItem`, `deselectAll`, `scrollToTop`, `scrollToBottom`, `scrollToItem`, and more) via protocol extension — adding a new convenience method to this protocol automatically provides it to `SimpleList`, `GroupedList`, and `OutlineList`\n\n### Changed\n\n- Extracted shared `computeItemsToReconfigure` function from `ListDataSource` and `MixedListDataSource`, deduplicating the autoReconfigure algorithm\n- Extracted shared `flattenSectionSnapshot` function from `ListDataSource` and `MixedListDataSource`, deduplicating the section snapshot flattening logic\n- Removed dead convenience methods from `ListConfigurationBridge` (`scrollToItem`, `selectItem`, `deselectItem`, `isSelected`, `scrollToTop`, `scrollToBottom`) — now provided by `ListConfigurable` protocol extension\n\n### Fixed\n\n- Fixed `MixedListDataSource.apply(_:to:animatingDifferences:)` bypassing `autoReconfigure`, so `ContentEquatable` items now correctly trigger reconfiguration when applied via section snapshots\n- Fixed `OutlineList.setItems` not reconfiguring cells when `CellViewModel` conforms to `ContentEquatable` and content changes but identity stays the same ([#65](https://github.com/Iron-Ham/Lists/issues/65))\n- Fixed context menus not appearing on Mac Catalyst by adopting the iOS 16+ plural `contextMenuConfigurationForItemsAt` delegate method ([#67](https://github.com/Iron-Ham/Lists/issues/67))\n\n## [0.6.5] - 2026-02-20"},"caller":{"type":"direct"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":841,"cache_read_input_tokens":25219,"output_tokens":980,"server_tool_use":{"web_search_requests":0,"web_fetch_requests":0},"service_tier":"standard","cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":841},"inference_geo":"","iterations":[],"speed":"standard"}},"requestId":"req_011CYT6MEBaEoEiUWpoteudx","type":"assistant","uuid":"82df70bb-3ba8-427d-9a2a-c26dfd888137","timestamp":"2026-02-24T15:00:02.268Z"}
{"parentUuid":"82df70bb-3ba8-427d-9a2a-c26dfd888137","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"Iron-Ham/release-0.6.6","slug":"sequential-brewing-ember","type":"progress","data":{"type":"hook_progress","hookEvent":"PostToolUse","hookName":"PostToolUse:Edit","command":"callback"},"parentToolUseID":"toolu_01BtKQVkheHvL6yC22AoMRkq","toolUseID":"toolu_01BtKQVkheHvL6yC22AoMRkq","timestamp":"2026-02-24T15:00:02.288Z","uuid":"f8f707c4-30b1-4e09-9039-46895c269b68"}
{"parentUuid":"82df70bb-3ba8-427d-9a2a-c26dfd888137","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"Iron-Ham/release-0.6.6","slug":"sequential-brewing-ember","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01BtKQVkheHvL6yC22AoMRkq","type":"tool_result","content":"The file /Users/zer0/Developer/oss/ListKit/CHANGELOG.md has been updated successfully."}]},"uuid":"386a3056-ced1-4ec8-9adf-de8e720361d7","timestamp":"2026-02-24T15:00:02.285Z","toolUseResult":{"filePath":"/Users/zer0/Developer/oss/ListKit/CHANGELOG.md","oldString":"## [Unreleased]\n\n### Added\n\n- Added `ListConfigurable` protocol that provides shared convenience APIs (`backgroundView`, `allowsMultipleSelection`, `isEditing`, `numberOfItems`, `selectedItems`, `selectItem`, `deselectItem`, `deselectAll`, `scrollToTop`, `scrollToBottom`, `scrollToItem`, and more) via protocol extension — adding a new convenience method to this protocol automatically provides it to `SimpleList`, `GroupedList`, and `OutlineList`\n\n### Changed\n\n- Extracted shared `computeItemsToReconfigure` function from `ListDataSource` and `MixedListDataSource`, deduplicating the autoReconfigure algorithm\n- Extracted shared `flattenSectionSnapshot` function from `ListDataSource` and `MixedListDataSource`, deduplicating the section snapshot flattening logic\n- Removed dead convenience methods from `ListConfigurationBridge` (`scrollToItem`, `selectItem`, `deselectItem`, `isSelected`, `scrollToTop`, `scrollToBottom`) — now provided by `ListConfigurable` protocol extension\n\n### Fixed\n\n- Fixed `MixedListDataSource.apply(_:to:animatingDifferences:)` bypassing `autoReconfigure`, so `ContentEquatable` items now correctly trigger reconfiguration when applied via section snapshots\n- Fixed `OutlineList.setItems` not reconfiguring cells when `CellViewModel` conforms to `ContentEquatable` and content changes but identity stays the same ([#65](https://github.com/Iron-Ham/Lists/issues/65))\n- Fixed context menus not appearing on Mac Catalyst by adopting the iOS 16+ plural `contextMenuConfigurationForItemsAt` delegate method ([#67](https://github.com/Iron-Ham/Lists/issues/67))\n\n## [0.6.5] - 2026-02-20","newString":"## [Unreleased]\n\n## [0.6.6] - 2026-02-24\n\n### Added\n\n- Added `ListConfigurable` protocol that provides shared convenience APIs (`backgroundView`, `allowsMultipleSelection`, `isEditing`, `numberOfItems`, `selectedItems`, `selectItem`, `deselectItem`, `deselectAll`, `scrollToTop`, `scrollToBottom`, `scrollToItem`, and more) via protocol extension — adding a new convenience method to this protocol automatically provides it to `SimpleList`, `GroupedList`, and `OutlineList`\n\n### Changed\n\n- Extracted shared `computeItemsToReconfigure` function from `ListDataSource` and `MixedListDataSource`, deduplicating the autoReconfigure algorithm\n- Extracted shared `flattenSectionSnapshot` function from `ListDataSource` and `MixedListDataSource`, deduplicating the section snapshot flattening logic\n- Removed dead convenience methods from `ListConfigurationBridge` (`scrollToItem`, `selectItem`, `deselectItem`, `isSelected`, `scrollToTop`, `scrollToBottom`) — now provided by `ListConfigurable` protocol extension\n\n### Fixed\n\n- Fixed `MixedListDataSource.apply(_:to:animatingDifferences:)` bypassing `autoReconfigure`, so `ContentEquatable` items now correctly trigger reconfiguration when applied via section snapshots\n- Fixed `OutlineList.setItems` not reconfiguring cells when `CellViewModel` conforms to `ContentEquatable` and content changes but identity stays the same ([#65](https://github.com/Iron-Ham/Lists/issues/65))\n- Fixed context menus not appearing on Mac Catalyst by adopting the iOS 16+ plural `contextMenuConfigurationForItemsAt` delegate method ([#67](https://github.com/Iron-Ham/Lists/issues/67))\n\n## [0.6.5] - 2026-02-20","originalFile":"# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [Unreleased]\n\n### Added\n\n- Added `ListConfigurable` protocol that provides shared convenience APIs (`backgroundView`, `allowsMultipleSelection`, `isEditing`, `numberOfItems`, `selectedItems`, `selectItem`, `deselectItem`, `deselectAll`, `scrollToTop`, `scrollToBottom`, `scrollToItem`, and more) via protocol extension — adding a new convenience method to this protocol automatically provides it to `SimpleList`, `GroupedList`, and `OutlineList`\n\n### Changed\n\n- Extracted shared `computeItemsToReconfigure` function from `ListDataSource` and `MixedListDataSource`, deduplicating the autoReconfigure algorithm\n- Extracted shared `flattenSectionSnapshot` function from `ListDataSource` and `MixedListDataSource`, deduplicating the section snapshot flattening logic\n- Removed dead convenience methods from `ListConfigurationBridge` (`scrollToItem`, `selectItem`, `deselectItem`, `isSelected`, `scrollToTop`, `scrollToBottom`) — now provided by `ListConfigurable` protocol extension\n\n### Fixed\n\n- Fixed `MixedListDataSource.apply(_:to:animatingDifferences:)` bypassing `autoReconfigure`, so `ContentEquatable` items now correctly trigger reconfiguration when applied via section snapshots\n- Fixed `OutlineList.setItems` not reconfiguring cells when `CellViewModel` conforms to `ContentEquatable` and content changes but identity stays the same ([#65](https://github.com/Iron-Ham/Lists/issues/65))\n- Fixed context menus not appearing on Mac Catalyst by adopting the iOS 16+ plural `contextMenuConfigurationForItemsAt` delegate method ([#67](https://github.com/Iron-Ham/Lists/issues/67))\n\n## [0.6.5] - 2026-02-20\n\n### Fixed\n\n- Fixed Mac Catalyst refresh control guard to use process-level `UIDevice.current.userInterfaceIdiom` instead of `UIView.behavioralStyle`, which does not resolve correctly before the view is in a window hierarchy\n\n## [0.6.4] - 2026-02-20\n\n### Fixed\n\n- Fixed crash when `onRefresh` is set on Mac Catalyst in Mac idiom — `UIRefreshControl` is now skipped when `behavioralStyle == .mac`, while apps using iPad idiom on Catalyst continue to get pull-to-refresh\n\n## [0.6.3] - 2026-02-20\n\n### Added\n\n- Comprehensive animated apply test suite (21 tests) covering section insert/delete/move/replace, item reorder and cross-section moves, non-structural reload/reconfigure fast path, structural changes with deferred reload/reconfigure markers, background diff with large datasets (≥1,000 items), and rapid-fire serialization edge cases\n- Deterministic cancellation tests verifying completion callback invocation and snapshot invariant safety when `applyTask` is cancelled mid-chain\n\n### Fixed\n\n- Completion handler `apply()` variant now supports cooperative cancellation and always invokes the completion callback (even when cancelled), preventing silent hangs for callers using `withCheckedContinuation`\n- `performBatchUpdates` completion handler now checks the `finished` parameter — deferred reloads/reconfigures are skipped when UIKit interrupts the batch update\n\n## [0.6.2] - 2026-02-19\n\n### Fixed\n\n- Fixed `NSInternalInconsistencyException` crash when applying snapshots with only inserts (no deletes) using animated differences — `currentSnapshot` is now updated inside the `performBatchUpdates` closure so UIKit sees correct pre/post item counts\n\n### Added\n\n- Animated apply regression tests covering pure inserts, pure deletes, empty↔populated transitions, and mixed cross-section operations\n\n## [0.6.1] - 2026-02-18\n\n### Changed\n\n- `CollectionViewDiffableDataSource.performApply()` now offloads diff computation to a background thread for snapshots with ≥1,000 items, keeping the main thread free during large dataset updates\n\n### Added\n\n- Realistic UUID-based benchmarks comparing ListKit vs Apple using the `Item.ID` pattern with `Identifiable` model types\n- Mixed operations benchmarks testing inserts + deletes + moves simultaneously across ListKit, Apple, and IGListKit\n- Data source `apply()` benchmarks measuring the full end-to-end pipeline (diff + `performBatchUpdates`) for ListKit vs Apple\n\n### Fixed\n\n- `speedup()` benchmark helper now correctly handles durations >= 1 second (previously ignored the `seconds` component)\n\n## [0.6.0] - 2026-02-16\n\n### Added\n\n- **Snapshot `Equatable` conformance**: `DiffableDataSourceSnapshot` now conforms to `Equatable`, comparing section identifiers and item arrays while ignoring transient reload/reconfigure markers.\n- **Snapshot `init(sections:)` convenience initializer**: Build snapshots from `[(SectionID, [ItemID])]` pairs in a single call.\n- **`sectionIdentifier(at:)` on `DiffableDataSourceSnapshot`**: Index-based section lookup, complementing the existing `index(ofSection:)`.\n- **`replaceItems(in:with:)` on `DiffableDataSourceSnapshot`**: Bulk-replace all items in a section without deleting/re-appending the section.\n- **`removeItems(where:)` on `DiffableDataSourceSnapshot`**: Remove items matching a predicate across all sections, following `removeAll(where:)` convention.\n- **`children(of:)` on `DiffableDataSourceSectionSnapshot`**: Returns direct children of a given item, complementing the existing `parent(of:)`.\n- **Programmatic selection**: `selectItem(_:at:animated:)`, `deselectItem(_:animated:)`, and `isSelected(_:)` on `SimpleList`, `GroupedList`, and `OutlineList`.\n- **`shouldSelect` handler**: Closure on all three configurations (+ SwiftUI modifiers) that gates item selection via the `collectionView(_:shouldSelectItemAt:)` delegate.\n- **`backgroundView` property**: Auto-visibility empty-state view on all three configurations (+ SwiftUI modifiers), shown when the list is empty and hidden when it has content.\n- **`canMoveItemProvider`**: Per-item reorder predicate on `SimpleList` and `GroupedList` (+ SwiftUI modifiers).\n- **`scrollToTop` / `scrollToBottom`**: Convenience scroll methods on all three configurations.\n- **OutlineList tree queries**: `allItems`, `visibleItems`, `rootItems`, `parent(of:)`, and `level(of:)` for inspecting the outline hierarchy.\n- **`SimpleList.items`**: Convenience accessor for the current items in the list.\n- **Snapshot type aliases**: `SimpleList.Snapshot`, `GroupedList.Snapshot`, `OutlineList.Snapshot` for ergonomic snapshot type references.\n- **`MixedSection` header/footer support**: Optional `header` and `footer` parameters on `MixedSection`, wired through `MixedListDataSource.apply(content:)` with `headerForSection(_:)`/`footerForSection(_:)` accessors and a `configureListHeaderFooterProvider()` convenience method for automatic supplementary view rendering.\n- **`MixedListDataSource` reorder support**: `canMoveItemHandler` and `didMoveItemHandler` properties for drag-and-drop reordering parity with `ListDataSource`.\n- **Section query methods on `GroupedList`**: `sectionIdentifier(for:)`, `index(for:)`, and `items(in:)` for section-level navigation.\n- **`OutlineList` programmatic expand/collapse**: `expand(_:animated:)`, `collapse(_:animated:)`, and `isExpanded(_:)` methods for controlling outline hierarchy without rebuilding the tree.\n- **`onMove` SwiftUI modifier**: `.onMove()` modifier on `SimpleListView` and `GroupedListView` for drag-and-drop reordering, completing the SwiftUI wrapper API.\n- **Convenience query properties**: `numberOfItems`, `numberOfSections`, `selectedItems`, and `deselectAll(animated:)` on all three configurations (`SimpleList`, `GroupedList`, `OutlineList`).\n- **`SectionModel.mapItems(_:)`**: Transforms items within a section while preserving metadata, matching `OutlineItem.mapItems(_:)` for API consistency.\n- **`SectionModel` `Identifiable` conformance**: Enables direct use in SwiftUI `ForEach` and other `Identifiable`-requiring contexts.\n- **`OutlineItem` `Identifiable` conformance**: Uses `item` as identity, enabling direct use in SwiftUI contexts.\n\n## [0.5.0] - 2026-02-16\n\n### Added\n\n- **UIKit chat examples**: Two new UIKit counterparts to the existing SwiftUI chat example — `ListsChatExampleViewController` (`SimpleList` + `CellViewModel` + `UIHostingConfiguration`) and `ListKitChatExampleViewController` (raw `CollectionViewDiffableDataSource` with pure UIKit cells and manual cell reconfiguration).\n- **Shared chat input bar**: Reusable `ChatInputBar` UIKit view with keyboard layout guide support.\n- **`ListCellViewModel` protocol**: Convenience refinement of `CellViewModel` that defaults `Cell` to `UICollectionViewListCell`, eliminating the most common boilerplate `typealias`.\n- **`UICollectionViewListCell.setListContent()` helpers**: Two convenience methods (parameter-based and closure-based) that replace the repetitive 4-line content configuration pattern with a single call.\n- **SwiftUI-style view modifiers**: Chainable `.onSelect`, `.onDelete`, `.onRefresh`, `.editing`, `.contextMenu`, `.trailingSwipeActions`, `.leadingSwipeActions`, and more on `SimpleListView`, `GroupedListView`, and `OutlineListView`. Replaces the 19+ parameter initializer with an idiomatic init-then-modify pattern.\n- **Pull-to-refresh on UIKit configurations**: `onRefresh` property on `SimpleList`, `GroupedList`, and `OutlineList` with proper async task lifecycle management, bringing parity with the SwiftUI wrappers.\n- **`ContentEquatable` protocol**: Opt-in protocol for detecting content changes in identity-based view models. Automatically marks items for reconfiguration when content differs, solving the stale-UI footgun with `Identifiable` types.\n- **`OutlineItemBuilder` result builder**: Declarative trailing-closure syntax for constructing `OutlineItem` hierarchies with full support for conditionals, loops, and arrays.\n- **`SectionModel` `@ItemsBuilder` initializer**: Declarative builder-based section construction constrained to `CellViewModel` items.\n- **`SnapshotSection` header/footer support**: `header` and `footer` optional parameters in the `SnapshotBuilder` DSL, wired through to `GroupedList.setSections`.\n- **`Snapshot.contains(_:)` and `contains(section:)`**: Convenience queries using the reverse map for O(1) lookups when available.\n\n### Changed\n\n- **BREAKING: SwiftUI view initializers simplified**: `SimpleListView`, `GroupedListView`, and `OutlineListView` CellViewModel-based initializers now accept only layout/structural parameters. Behavioral properties (`onSelect`, `onDelete`, `onRefresh`, `editing`, etc.) must be set via the new chainable modifiers. Inline content initializers retain item-typed behavioral params (e.g., `onSelect`, `onDelete`) since they perform `Data → Item` wrapping.\n- **Refresh control logic consolidated**: Extracted `RefreshControlManager` to replace triplicated refresh control code across `SimpleList`, `GroupedList`, and `OutlineList`.\n- **Example app updated**: All UIKit examples use `ListCellViewModel` and `setListContent()`. `OutlineExampleViewController` uses builder DSL. `SwiftUIWrappersExampleView` demonstrates modifier-based configuration. `LiveExampleViewController` uses `ContentEquatable` for automatic reconfiguration.\n- **Example app: expanded feature coverage**: DSL example uses `GroupedList` with `SnapshotSection` header/footer DSL and `Snapshot.contains(section:)`. GroupedList example demonstrates `@ItemsBuilder`, `ListAccessory.toggle`, `.progress`, and `.activityIndicator`. All three UIKit examples include pull-to-refresh. SwiftUI `GroupedDemoView` demonstrates `.editing` and `.allowsMultipleSelection` modifiers.\n\n### Fixed\n\n- **Chat example separators**: Added explicit `separatorHandler` to `ListsChatExampleViewController` to ensure separators are fully hidden, preventing `itemSeparatorHandler` from overriding `showsSeparators: false`.\n- **Cell reuse accessory leak**: `setListContent()` now unconditionally assigns accessories, preventing stale accessories from persisting across cell reuse.\n- **`ListAccessory.progress` crash**: Replaced `translatesAutoresizingMaskIntoConstraints = false` (which violates `UICellAccessory.customView` requirements) with `reservedLayoutWidth: .custom(60)`.\n\n## [0.4.0] - 2026-02-15\n\n### Added\n\n- **`ListAccessory.toggle`**: Inline `UISwitch` accessory for settings screens with `isOn` binding and `onChange` callback.\n- **`ListAccessory.badge`**: Pill-shaped count/status badge via `BadgeLabel` subclass with tint color propagation.\n- **`ListAccessory.image`**: SF Symbol trailing icon accessory with debug assertions for invalid symbol names.\n- **`ListAccessory.progress`**: Small inline progress bar (60pt width) with out-of-range value assertions.\n- **`ListAccessory.activityIndicator`**: Spinning indicator accessory for loading states.\n\n### Changed\n\n- **`ListAccessory.uiAccessory`** is now `@MainActor`-isolated for UIKit thread safety.\n\n## [0.3.0] - 2026-02-15\n\n### Added\n\n- **Scroll view delegate forwarding**: `SimpleList`, `GroupedList`, and `OutlineList` now forward `UIScrollViewDelegate` callbacks so consumers can receive scroll events without replacing the collection view's delegate.\n- **`collectionViewHandler` and `scrollViewDelegate` parameters** added to `GroupedListView` and `OutlineListView` for API parity with `SimpleListView`.\n- **`selfSizingInvalidation` parameter** on `SimpleList` and `SimpleListView` for controlling cell resize behavior during streaming content.\n- **Chat example**: New `ChatExampleView` demonstrating streaming chat with manual layout invalidation, scroll-to-bottom tracking, and bubble-scoped context menus.\n\n## [0.2.0] - 2026-02-15\n\n### Added\n\n- **`onDelete` callback**: Automatic trailing swipe action generation for item deletion across all list configurations.\n- **`onMove` with drag-and-drop reorder**: Full drag-and-drop reorder infrastructure on `SimpleList` and `GroupedList` with `canMoveItemHandler` and `didMoveItemHandler` callbacks.\n- **`onDeselect` callback**: Multi-selection deselection support forwarded through all SwiftUI wrappers.\n- **`showsSeparators` parameter**: Native UIKit separator visibility toggle on all list configurations and `LayoutHelpers` factory methods.\n- **`ListAccessory.label`**: Text label accessory case.\n- **`ListAccessory.detail`**: Detail accessory with optional action handler.\n- **`ListAccessory.multiselect`**: Multi-selection checkmark accessory.\n- **`ListAccessory.popUpMenu`**: Pop-up menu accessory.\n- **UICollectionLayoutListConfiguration support**: `separatorColor`, `backgroundColor`, `headerTopPadding` across all list types with `separatorHandler` for per-item separator customization.\n- **Header/footer configuration**: `headerMode`/`footerMode` and `headerContentProvider`/`footerContentProvider` on `GroupedList`.\n- **Selection APIs**: `allowsMultipleSelection`, `allowsSelectionDuringEditing`, `allowsMultipleSelectionDuringEditing`, and `isEditing` computed property on all list types.\n- **Navigation APIs**: `itemIdentifier(for:)`, `indexPath(for:)`, and `scrollToItem(_:)` on all list configurations.\n- **`GroupedList.setSections` with `SnapshotBuilder` DSL** for declarative section updates.\n- **`ListLayout` factory methods** for all compositional layout appearance styles.\n- **`dismantleUIView`** added to all SwiftUI wrappers for deterministic cleanup.\n- **`buildLimitedAvailability`** added to all four result builders.\n- **`withTaskCancellationHandler`** support to propagate cancellation from structured parent tasks during SwiftUI coordinator teardown.\n\n### Changed\n\n- **`SectionModel` `Item` constraint** relaxed to `Hashable & Sendable`, fixing inline-content convenience initializers for plain data types.\n- **`SwipeActionBridge` renamed to `ListConfigurationBridge`**: Centralizes shared delegate logic, item navigation, and scroll-to-item into a single bridge to eliminate duplication across list types.\n- **Rapid-render coalescing**: New updates now cancel previous pending applies for faster UI convergence.\n- **UIKit layout closures** wrapped in `MainActor.assumeIsolated` for Swift 6 strict concurrency readiness.\n- **`OutlineList.setItems`** now uses native section snapshot apply instead of flat snapshot rebuild, enabling UIKit's optimized subtree diffing and native expand/collapse animations.\n\n### Fixed\n\n- **Section snapshot parent map corruption**: Fixed `snapshot(of:includingParent:)` where dangling parent references were copied for extracted subtrees.\n- **Multi-selection**: Guard `deselectItem` behind `!allowsMultipleSelection` so multi-selection workflows function correctly.\n- **Snapshot/UI mismatch**: Serialized `applySnapshotUsingReloadData` through the apply task chain to prevent interleaving with animated applies.\n- **Stale snapshot on deallocation**: Always update `currentSnapshot` before the `guard` when `collectionView` is deallocated.\n- **GroupedList header/footer atomicity**: Use merge-then-trim pattern during animated transitions.\n- **Snapshot data loss in move operation**: Validate destination section bounds before deleting item in `moveItemAt`.\n- **`deinit` task cancellation** added to `SimpleList`, `GroupedList`, and `OutlineList` to cancel lingering tasks on deallocation.\n- **Refresh control cleanup**: Use `defer` in `handleRefresh` to ensure `refreshTask` cleanup and spinner dismissal run on all exit paths.\n\n### Performance\n\n- **LIS-based minimal move detection**: Replaced naive diff move detection with longest-increasing-subsequence algorithm using O(n log n) patience sorting, eliminating unnecessary batch update animations.\n\n## [0.1.0] - 2026-02-13\n\n### Added\n\n- **SwiftUI wrappers**: `SimpleListView`, `GroupedListView`, and `OutlineListView` — `UIViewRepresentable` wrappers driven by `@State`.\n- **Inline content API**: `@ViewBuilder` convenience initializers on all three SwiftUI wrappers. Define cell content inline without creating a dedicated `CellViewModel` type.\n- **`SwiftUICellViewModel` protocol**: Protocol for reusable SwiftUI-based cell view models with `body` and `accessories`.\n- **`InlineCellViewModel`**: Type-erased `CellViewModel` backing the inline content API.\n- **`ListAccessory`**: Pure-Swift enum wrapping `UICellAccessory` with a `.custom` escape hatch.\n- **Swipe actions**: Leading and trailing swipe action support on all three list configurations and their SwiftUI wrappers.\n- **Context menus**: Context menu support on all three list configurations and their SwiftUI wrappers.\n- **Pull-to-refresh**: `onRefresh` async closure on all three SwiftUI wrappers with automatic `UIRefreshControl` lifecycle management.\n- **`OutlineItem.mapItems`**: Recursive tree transformation for mapping data types across outline hierarchies.\n- **`OutlineItem` `Equatable` conformance**: Enables diffing in SwiftUI `updateUIView`.\n\n### Changed\n\n- **`OutlineItem` generic constraint** relaxed from `CellViewModel` to `Hashable & Sendable`, enabling use with plain data types.\n- **`SwiftUICellViewModel.accessories`** return type changed from `[UICellAccessory]` to `[ListAccessory]`.\n- **Task serialization** added to `SimpleList.setItems`, `GroupedList.setSections`, and `OutlineList.setItems` to prevent concurrent snapshot applies.\n- **Supplementary view bounds checking** added to `GroupedList` header/footer registration.\n\n## [0.0.1] - 2025-12-20\n\nInitial development release.\n\n### Added\n\n- **ListKit**: O(n) Heckel diff engine, `DiffableDataSourceSnapshot`, `DiffableDataSourceSectionSnapshot`, `CollectionViewDiffableDataSource`.\n- **Lists**: `CellViewModel` protocol, `ListDataSource`, `MixedListDataSource`, `AnyItem`, result-builder DSL (`SnapshotBuilder`, `ItemsBuilder`, `MixedSnapshotBuilder`), `SimpleList`, `GroupedList`, `OutlineList` configurations, layout helpers.\n- Swift 6 strict concurrency support.\n- MIT license.\n","structuredPatch":[{"oldStart":7,"oldLines":6,"newStart":7,"newLines":8,"lines":[" "," ## [Unreleased]"," ","+## [0.6.6] - 2026-02-24","+"," ### Added"," "," - Added `ListConfigurable` protocol that provides shared convenience APIs (`backgroundView`, `allowsMultipleSelection`, `isEditing`, `numberOfItems`, `selectedItems`, `selectItem`, `deselectItem`, `deselectAll`, `scrollToTop`, `scrollToBottom`, `scrollToItem`, and more) via protocol extension — adding a new convenience method to this protocol automatically provides it to `SimpleList`, `GroupedList`, and `OutlineList`"]}],"userModified":false,"replaceAll":false},"sourceToolAssistantUUID":"82df70bb-3ba8-427d-9a2a-c26dfd888137"}
{"parentUuid":"386a3056-ced1-4ec8-9adf-de8e720361d7","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"Iron-Ham/release-0.6.6","slug":"sequential-brewing-ember","message":{"model":"claude-opus-4-6","id":"msg_01665GLC6bRNh3pbwmVKcck7","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me commit and push."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":1036,"cache_read_input_tokens":26060,"cache_creation":{"ephemeral_5m_input_tokens":1036,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard","inference_geo":"global"}},"requestId":"req_011CYT6NLYLkEGGEeCYCcGj1","type":"assistant","uuid":"befa4271-5558-482a-9197-6af61e19cb2a","timestamp":"2026-02-24T15:00:04.740Z"}
{"parentUuid":"befa4271-5558-482a-9197-6af61e19cb2a","isSidechain":false,"userType":"external","cwd":"/Users/zer0/Developer/oss/ListKit","sessionId":"58fc810a-a0eb-44f8-b01d-23a927472e80","version":"2.1.52","gitBranch":"Iron-Ham/release-0.6.6","slug":"sequential-brewing-ember","message":{"model":"claude-opus-4-6","id":"msg_01665GLC6bRNh3pbwmVKcck7","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_019xVFgYmSxrio2GiS9FHUWx","name":"Bash","input":{"command":"git add CHANGELOG.md && git commit -m \"$(cat <<'EOF'\nchore: stamp changelog for 0.6.6 release\nEOF\n)\"","description":"Commit changelog stamp"},"caller":{"type":"direct"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":1036,"cache_read_input_tokens":26060,"cache_creation":{"ephemeral_5m_input_tokens":1036,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard","inference_geo":"global"}},"requestId":"req_011CYT6NLYLkEGGEeCYCcGj1","type":"assistant","uuid":"5443ad96-18d2-456b-ae27-102813ad4237","timestamp":"2026-02-24T15:00:06.130Z"}
